(()=>{var e={};e.id=5009,e.ids=[5009],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},8112:(e,s,r)=>{"use strict";async function a(e,s){try{throw Error("getPermissions must be called client-side")}catch(e){return console.error("Error in getPermissions:",e),{permissions:[],categories:[]}}}async function t(e){try{throw Error("createPermission must be called client-side")}catch(e){throw Error(`Failed to create permission: ${e.message||"Unknown error"}`)}}async function i(e,s){try{throw Error("updatePermission must be called client-side")}catch(e){throw Error(`Failed to update permission: ${e.message||"Unknown error"}`)}}async function n(e){try{throw Error("deletePermission must be called client-side")}catch(e){throw Error(`Failed to delete permission: ${e.message||"Unknown error"}`)}}r.d(s,{LA:()=>i,VE:()=>a,iP:()=>t,pK:()=>n}),r(29226)},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},25582:(e,s,r)=>{"use strict";r.d(s,{$m:()=>o,As:()=>d,nD:()=>c,ub:()=>m});var a=r(60687),t=r(43210),i=r(19236),n=r(78272),l=r(96241);let c=i.bL,d=t.forwardRef(({className:e,...s},r)=>(0,a.jsx)(i.q7,{ref:r,className:(0,l.cn)("border-b",e),...s}));d.displayName="AccordionItem";let o=t.forwardRef(({className:e,children:s,...r},t)=>(0,a.jsx)(i.Y9,{className:"flex",children:(0,a.jsxs)(i.l9,{ref:t,className:(0,l.cn)("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",e),...r,children:[s,(0,a.jsx)(n.A,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})}));o.displayName=i.l9.displayName;let m=t.forwardRef(({className:e,children:s,...r},t)=>(0,a.jsx)(i.UC,{ref:t,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...r,children:(0,a.jsx)("div",{className:(0,l.cn)("pb-4 pt-0",e),children:s})}));m.displayName=i.UC.displayName},27211:(e,s,r)=>{Promise.resolve().then(r.bind(r,47439))},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},32787:(e,s,r)=>{Promise.resolve().then(r.bind(r,57326))},33593:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>i});var a=r(37413),t=r(56254);function i({children:e}){return(0,a.jsx)(t.e,{children:e})}},33873:e=>{"use strict";e.exports=require("path")},39390:(e,s,r)=>{"use strict";r.d(s,{J:()=>d});var a=r(60687),t=r(43210),i=r(78148),n=r(24224),l=r(96241);let c=(0,n.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=t.forwardRef(({className:e,...s},r)=>(0,a.jsx)(i.b,{ref:r,className:(0,l.cn)(c(),e),...s}));d.displayName=i.b.displayName},42902:(e,s,r)=>{"use strict";r.d(s,{d:()=>l});var a=r(60687),t=r(43210),i=r(90270),n=r(96241);let l=t.forwardRef(({className:e,...s},r)=>(0,a.jsx)(i.bL,{className:(0,n.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...s,ref:r,children:(0,a.jsx)(i.zi,{className:(0,n.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));l.displayName=i.bL.displayName},47439:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>Z});var a=r(60687),t=r(43210),i=r(85910),n=r(24934),l=r(55192),c=r(41862),d=r(71702),o=r(92241),m=r(68988),h=r(39390),x=r(42902),u=r(15616),p=r(25582),j=r(93437),f=r(39642),g=r(4331),N=r(33135),v=r(17971),y=r(13964),b=r(96241),w=r(95745),A=r(71420);function C({user:e,open:s,onOpenChange:r,onRoleAssigned:i}){let[l,m]=(0,t.useState)(!1),[x,u]=(0,t.useState)([]),[p,j]=(0,t.useState)(null),[f,w]=(0,t.useState)(!1),{toast:C}=(0,d.dj)(),_=async s=>{if(s.preventDefault(),e&&p)try{m(!0),await (0,A.iz)(e.id,p),C({title:"Success",description:"User role updated successfully."}),r(!1),i()}catch(e){C({title:"Error",description:e.message||"An unexpected error occurred.",variant:"destructive"})}finally{m(!1)}};return(0,a.jsx)(o.cj,{open:s,onOpenChange:r,children:(0,a.jsxs)(o.h,{side:"right",className:"w-full sm:max-w-md flex flex-col",children:[(0,a.jsxs)(o.Fm,{children:[(0,a.jsx)(o.qp,{children:"Assign Role"}),(0,a.jsxs)(o.Qs,{children:["Assign a role to user ",(0,a.jsxs)("span",{className:"font-semibold",children:[e?.first_name," ",e?.last_name]}),". Select a role from the list below."]})]}),(0,a.jsxs)("form",{onSubmit:_,className:"flex-grow py-4",children:[(0,a.jsx)("div",{className:"space-y-6",children:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(h.J,{htmlFor:"role",children:"Role *"}),(0,a.jsxs)(N.AM,{open:f,onOpenChange:w,children:[(0,a.jsx)(N.Wv,{asChild:!0,children:(0,a.jsxs)(n.$,{variant:"outline",role:"combobox","aria-expanded":f,className:"w-full justify-between",children:[p?x.find(e=>e.id===p)?.name:"Select role...",(0,a.jsx)(v.A,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),(0,a.jsx)(N.hl,{className:"w-full p-0",children:(0,a.jsxs)(g.uB,{children:[(0,a.jsx)(g.G7,{placeholder:"Search roles..."}),(0,a.jsxs)(g.oI,{children:[(0,a.jsx)(g.xL,{children:"No roles found."}),(0,a.jsx)(g.L$,{children:x.map(e=>(0,a.jsxs)(g.h_,{value:e.name,onSelect:()=>{j(e.id),w(!1)},children:[(0,a.jsx)(y.A,{className:(0,b.cn)("mr-2 h-4 w-4",p===e.id?"opacity-100":"opacity-0")}),e.name]},e.id))})]})]})})]})]})}),(0,a.jsxs)(o.XW,{className:"mt-auto pt-4 border-t",children:[(0,a.jsx)(n.$,{type:"button",variant:"outline",onClick:()=>r(!1),disabled:l,children:"Cancel"}),(0,a.jsxs)(n.$,{type:"submit",disabled:l||!p,children:[l&&(0,a.jsx)(c.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Assign Role"]})]})]})]})})}var _=r(10432),k=r(85650),S=r(96752),E=r(63974),P=r(59821),R=r(55629),$=r(99270),F=r(96474),U=r(31158),M=r(78122),D=r(47033),L=r(14952),V=r(93661),q=r(13861),O=r(63143),z=r(41312),T=r(88233);function G({users:e,loading:s,onViewUser:r,onEditUser:t,onDeleteUser:i,onAssignRole:l,search:c,onSearchChange:d,currentPage:o,totalPages:h,rowsPerPage:x,onPageChange:u,onRowsPerPageChange:p,totalItems:j,onRefresh:f,onCreateNew:g}){let N=e=>e?(0,a.jsx)(P.E,{variant:"default",className:"bg-green-100 text-green-800",children:"Active"}):(0,a.jsx)(P.E,{variant:"secondary",className:"bg-red-100 text-red-800",children:"Inactive"}),v=e=>e?(0,a.jsx)(P.E,{variant:"default",className:"bg-green-100 text-green-800",children:"Verified"}):(0,a.jsx)(P.E,{variant:"secondary",className:"bg-yellow-100 text-yellow-800",children:"Pending"});return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("div",{className:"flex space-x-4",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)($.A,{className:"absolute left-2 top-1/2 transform -translate-y-1/2 text-gray-500"}),(0,a.jsx)(m.p,{className:"pl-8 max-w-sm",placeholder:"Search users...",value:c,onChange:e=>d(e.target.value)})]})}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsxs)(n.$,{size:"sm",onClick:g,className:"bg-primary text-white hover:bg-primary/90",children:[(0,a.jsx)(F.A,{className:"mr-2 h-4 w-4"}),"Add User"]}),(0,a.jsxs)(n.$,{size:"sm",className:"bg-primary text-white hover:bg-primary/90",children:[(0,a.jsx)(U.A,{className:"mr-2 h-4 w-4"}),"Export"]}),(0,a.jsxs)(n.$,{size:"sm",className:"bg-primary text-white hover:bg-primary/90",onClick:f,children:[(0,a.jsx)(M.A,{className:"mr-2 h-4 w-4"}),"Refresh"]})]})]}),(0,a.jsx)("div",{className:"rounded-md border bg-white",children:(0,a.jsxs)(S.XI,{children:[(0,a.jsx)(S.A0,{children:(0,a.jsxs)(S.Hj,{children:[(0,a.jsx)(S.nd,{className:"font-semibold",children:"Name"}),(0,a.jsx)(S.nd,{className:"font-semibold",children:"Email"}),(0,a.jsx)(S.nd,{className:"font-semibold",children:"Role"}),(0,a.jsx)(S.nd,{className:"font-semibold",children:"Status"}),(0,a.jsx)(S.nd,{className:"font-semibold",children:"Verification"}),(0,a.jsx)(S.nd,{className:"font-semibold",children:"Last Login"}),(0,a.jsx)(S.nd,{className:"font-semibold",children:"Created"}),(0,a.jsx)(S.nd,{className:"text-right font-semibold",children:"Actions"})]})}),(0,a.jsx)(S.BF,{children:s?(0,a.jsx)(S.Hj,{children:(0,a.jsx)(S.nA,{colSpan:8,className:"h-24 text-center",children:(0,a.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-primary"}),(0,a.jsx)("span",{children:"Loading users..."})]})})}):0===e.length?(0,a.jsx)(S.Hj,{children:(0,a.jsx)(S.nA,{colSpan:8,className:"h-24 text-center",children:(0,a.jsxs)("div",{className:"text-gray-500",children:[(0,a.jsx)("p",{className:"font-semibold",children:"No users found"}),(0,a.jsx)("p",{className:"text-sm",children:"Add your first user to get started"})]})})}):e.map(e=>(0,a.jsxs)(S.Hj,{className:"hover:bg-gray-50 cursor-pointer",onClick:()=>r(e),children:[(0,a.jsx)(S.nA,{className:"font-medium",children:(0,a.jsx)("div",{className:"flex flex-col",children:(0,a.jsx)("span",{className:"text-sm font-semibold",children:[e.first_name,e.last_name].filter(Boolean).join(" ")||"-"})})}),(0,a.jsx)(S.nA,{children:(0,a.jsx)("div",{className:"flex flex-col",children:(0,a.jsx)("span",{className:"text-sm font-medium",children:e.email||"-"})})}),(0,a.jsx)(S.nA,{children:(0,a.jsx)("div",{className:"flex flex-col",children:(0,a.jsx)("span",{className:"text-sm font-medium",children:e.role?.name||"No role assigned"})})}),(0,a.jsx)(S.nA,{children:N(e.is_active)}),(0,a.jsx)(S.nA,{children:v(e.email_verified)}),(0,a.jsx)(S.nA,{children:(0,a.jsxs)("div",{className:"text-sm",children:[e.last_login_at?(0,k.GP)(new Date(e.last_login_at),"MMM dd, yyyy"):"-",e.last_login_at&&(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:(0,k.GP)(new Date(e.last_login_at),"HH:mm")})]})}),(0,a.jsx)(S.nA,{children:(0,a.jsxs)("div",{className:"text-sm",children:[e.created_at?(0,k.GP)(new Date(e.created_at),"MMM dd, yyyy"):"-",e.created_at&&(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:(0,k.GP)(new Date(e.created_at),"HH:mm")})]})}),(0,a.jsx)(S.nA,{className:"text-right",onClick:e=>e.stopPropagation(),children:(0,a.jsx)(H,{user:e,onView:()=>r(e),onEdit:()=>t(e),onDelete:()=>i(e),onAssignRole:()=>l(e)})})]},e.id))})]})})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("p",{className:"text-sm font-medium",children:"Rows per page"}),(0,a.jsxs)(E.l6,{value:x.toString(),onValueChange:e=>{p(Number(e)),u(1)},children:[(0,a.jsx)(E.bq,{className:"h-8 w-[70px]",children:(0,a.jsx)(E.yv,{placeholder:x})}),(0,a.jsx)(E.gC,{side:"top",children:[5,10,20,30,40,50].map(e=>(0,a.jsx)(E.eb,{value:e.toString(),children:e},e))})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)(n.$,{size:"sm",onClick:()=>u(Math.max(o-1,1)),disabled:1===o,className:"bg-primary text-white hover:bg-primary/90",children:[(0,a.jsx)(D.A,{className:"h-4 w-4"}),"Previous"]}),(0,a.jsxs)("div",{className:"flex items-center justify-center text-sm font-medium",children:["Page ",o," of ",h||1]}),(0,a.jsxs)(n.$,{size:"sm",onClick:()=>u(Math.min(o+1,h||1)),disabled:o===h||0===h,className:"bg-primary text-white hover:bg-primary/90",children:["Next",(0,a.jsx)(L.A,{className:"h-4 w-4"})]})]})]})]})}function H({user:e,onView:s,onEdit:r,onDelete:t,onAssignRole:i}){return(0,a.jsxs)(R.rI,{children:[(0,a.jsx)(R.ty,{asChild:!0,children:(0,a.jsx)(n.$,{variant:"ghost",className:"h-8 w-8 p-0",children:(0,a.jsx)(V.A,{className:"h-4 w-4"})})}),(0,a.jsxs)(R.SQ,{align:"end",children:[(0,a.jsx)(R.lp,{children:"Actions"}),(0,a.jsxs)(R._2,{onClick:s,children:[(0,a.jsx)(q.A,{className:"h-4 w-4 mr-2"})," View Details"]}),(0,a.jsxs)(R._2,{onClick:r,children:[(0,a.jsx)(O.A,{className:"h-4 w-4 mr-2"})," Edit User"]}),(0,a.jsxs)(R._2,{onClick:i,children:[(0,a.jsx)(z.A,{className:"h-4 w-4 mr-2"})," Assign Role"]}),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(R.mB,{}),(0,a.jsxs)(R._2,{onClick:t,className:"text-red-600 focus:text-red-600",children:[(0,a.jsx)(T.A,{className:"h-4 w-4 mr-2"})," Delete User"]})]})]})]})}var J=r(29226);function B(){let[e,s]=(0,t.useState)([]),[r,i]=(0,t.useState)(!0),[g,N]=(0,t.useState)(!1),[v,y]=(0,t.useState)(null),[b,w]=(0,t.useState)(!1),[k,S]=(0,t.useState)(null),[E,P]=(0,t.useState)(!1),[R,$]=(0,t.useState)(!1),[F,U]=(0,t.useState)(!1),[M,D]=(0,t.useState)({}),[L,V]=(0,t.useState)(""),[q,O]=(0,t.useState)(1),[z,T]=(0,t.useState)(1),[H,B]=(0,t.useState)(10),{toast:I}=(0,d.dj)(),{userProfile:X}=(0,f.A)(),W=async()=>{i(!0);try{let e=await (0,A.hU)();s(e),T(Math.ceil(e.length/H)||1)}catch(e){I({title:"Error",description:e.message||"Failed to load users.",variant:"destructive"})}finally{i(!1)}},Q=async()=>{await W()},K=async e=>{e.preventDefault(),w(!0);try{let s=new FormData(e.currentTarget),r=s.get("first_name"),a=s.get("last_name"),t=s.get("phone"),i=s.get("role_id"),n="on"===s.get("is_active");if(!r||!a){I({title:"Validation Error",description:"First name and last name are required.",variant:"destructive"}),w(!1);return}let l={};if(l={...l,first_name:r.trim(),last_name:a.trim(),is_active:n},t&&""!==t.trim()&&(l={...l,phone:t.trim()}),l={...l,role_id:i&&""!==i.trim()&&"__no_role__"!==i?i:null},!v){let e=s.get("email");if(!e||""===e.trim()){I({title:"Validation Error",description:"Email is required for new users.",variant:"destructive"}),w(!1);return}l={...l,email:e.trim()}}v?(await (0,A.TK)(v.id,l),I({title:"Success",description:"User updated successfully."})):(await (0,A.kg)(l),I({title:"Success",description:"User created successfully."})),N(!1),y(null),await Q()}catch(e){I({title:"Error",description:e.message||"An unexpected error occurred.",variant:"destructive"})}finally{w(!1)}},Z=async e=>{if(confirm("Are you sure you want to delete this user? This action cannot be undone."))try{await (0,A.hG)(e.id),I({title:"Success",description:"User deleted successfully."}),await Q()}catch(e){I({title:"Error",description:e.message||"An unexpected error occurred.",variant:"destructive"})}},Y=async e=>{e.preventDefault(),U(!0);try{let s=new FormData(e.currentTarget),r={name:s.get("name"),description:s.get("description")},a=[];Object.entries(M).forEach(([e,s])=>{s&&a.push(e)}),await (0,J.Ay)("/roles","POST",{...r,permission_ids:a,is_active:!0}),I({title:"Success",description:"Role created successfully."}),$(!1),D({}),await Q()}catch(e){I({title:"Error",description:e.message||"An unexpected error occurred.",variant:"destructive"})}finally{U(!1)}},ee=(e,s)=>{D(r=>({...r,[e]:s}))},es=(e,s)=>{D(r=>{let a={...r};return e.forEach(e=>{a[e]=s}),a})},er=_.lp.every(e=>M[e]);er||_.lp.some(e=>M[e]);let ea=e.filter(e=>{let s=L.toLowerCase();return e.first_name&&e.first_name.toLowerCase().includes(s)||e.last_name&&e.last_name.toLowerCase().includes(s)||e.email&&e.email.toLowerCase().includes(s)||e.role&&e.role.name&&e.role.name.toLowerCase().includes(s)}),et=ea.slice((q-1)*H,q*H);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(l.Zp,{children:[(0,a.jsxs)(l.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(l.ZB,{className:"text-2xl font-bold",children:"Users"}),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(o.cj,{open:g,onOpenChange:N,children:[(0,a.jsx)(o.CG,{asChild:!0}),(0,a.jsxs)(o.h,{side:"right",className:"w-full sm:max-w-lg flex flex-col",children:[(0,a.jsxs)(o.Fm,{children:[(0,a.jsx)(o.qp,{className:"text-2xl font-bold",children:v?"Edit User":"Create New User"}),(0,a.jsx)(o.Qs,{className:"text-base",children:v?"Make changes to this user's profile.":"Add a new user to your company."})]}),(0,a.jsxs)("form",{id:"edit-user-form",onSubmit:K,className:"grid gap-6 py-4 flex-grow overflow-y-auto",children:[(0,a.jsxs)("div",{className:"p-6 border rounded-lg bg-card text-card-foreground shadow-sm",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"User Information"}),(0,a.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,a.jsx)(h.J,{htmlFor:"first_name",className:"text-right",children:"First Name *"}),(0,a.jsx)(m.p,{id:"first_name",name:"first_name",defaultValue:v?.first_name||"",className:"col-span-3",required:!0})]}),(0,a.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4 mt-4",children:[(0,a.jsx)(h.J,{htmlFor:"last_name",className:"text-right",children:"Last Name *"}),(0,a.jsx)(m.p,{id:"last_name",name:"last_name",defaultValue:v?.last_name||"",className:"col-span-3",required:!0})]}),(0,a.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4 mt-4",children:[(0,a.jsxs)(h.J,{htmlFor:"email",className:"text-right",children:["Email ",!v&&"*"]}),(0,a.jsx)(m.p,{id:"email",name:"email",type:"email",defaultValue:v?.email||"",className:"col-span-3",required:!v,readOnly:!!v,disabled:!!v})]}),(0,a.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4 mt-4",children:[(0,a.jsx)(h.J,{htmlFor:"phone",className:"text-right",children:"Phone"}),(0,a.jsx)(m.p,{id:"phone",name:"phone",defaultValue:v?.phone||"",className:"col-span-3"})]})]}),(0,a.jsxs)("div",{className:"p-6 border rounded-lg bg-card text-card-foreground shadow-sm",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Role & Status"}),(0,a.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,a.jsx)(h.J,{htmlFor:"is_active",className:"text-right",children:"Status"}),(0,a.jsxs)("div",{className:"col-span-3 flex items-center",children:[(0,a.jsx)(x.d,{id:"is_active",name:"is_active",defaultChecked:v?.is_active??!0}),(0,a.jsx)(h.J,{htmlFor:"is_active",className:"ml-2",children:"Active"})]})]}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground mt-2",children:'Note: Use the "Assign Role" action to assign or change a user\'s role.'})]})]}),(0,a.jsxs)(o.XW,{className:"mt-auto pt-4 border-t flex justify-between",children:[(0,a.jsx)(n.$,{type:"button",variant:"outline",onClick:()=>N(!1),disabled:b,children:"Cancel"}),(0,a.jsxs)(n.$,{type:"submit",form:"edit-user-form",disabled:b,className:"bg-primary hover:bg-primary/90",children:[b&&(0,a.jsx)(c.A,{className:"mr-2 h-4 w-4 animate-spin"}),v?"Update User":"Create User"]})]})]})]}),(0,a.jsx)(o.cj,{open:R,onOpenChange:$,children:(0,a.jsxs)(o.h,{side:"right",className:"w-full sm:max-w-2xl flex flex-col",children:[(0,a.jsxs)(o.Fm,{children:[(0,a.jsx)(o.qp,{className:"text-2xl font-bold",children:"Create New Role"}),(0,a.jsx)(o.Qs,{className:"text-base",children:"Define a new role with specific access rights."})]}),(0,a.jsx)("form",{id:"create-role-form",onSubmit:Y,className:"flex-grow overflow-y-auto py-4",children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"p-6 border rounded-lg bg-card text-card-foreground shadow-sm",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Role Details"}),(0,a.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,a.jsx)(h.J,{htmlFor:"name",className:"text-right",children:"Role Name *"}),(0,a.jsx)(m.p,{id:"name",name:"name",className:"col-span-3",required:!0})]}),(0,a.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4 mt-4",children:[(0,a.jsx)(h.J,{htmlFor:"description",className:"text-right",children:"Description"}),(0,a.jsx)(u.T,{id:"description",name:"description",className:"col-span-3",placeholder:"Enter role description"})]})]}),(0,a.jsxs)("div",{className:"p-6 border rounded-lg bg-card text-card-foreground shadow-sm",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Permissions"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 mb-4 p-3 border rounded",children:[(0,a.jsx)(j.S,{id:"global-select-all",checked:er,onCheckedChange:e=>{let s={};_.lp.forEach(r=>{s[r]=e}),D(s)}}),(0,a.jsx)(h.J,{htmlFor:"global-select-all",className:"font-medium",children:"Select All Permissions"})]}),(0,a.jsx)(p.nD,{type:"multiple",className:"w-full",children:_.vq.map(e=>{let s=e.permissions.every(e=>M[e]);return s||e.permissions.some(e=>M[e]),(0,a.jsxs)(p.As,{value:e.title,children:[(0,a.jsx)(p.$m,{className:"hover:no-underline",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(j.S,{checked:s,onCheckedChange:s=>es(e.permissions,s),onClick:e=>e.stopPropagation()}),(0,a.jsx)("span",{className:"font-medium",children:e.title})]})}),(0,a.jsx)(p.ub,{children:(0,a.jsx)("div",{className:"space-y-4 pt-2",children:e.permissions.map(e=>(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(j.S,{id:`perm-${e}`,checked:M[e]||!1,onCheckedChange:s=>ee(e,s)}),(0,a.jsx)(h.J,{htmlFor:`perm-${e}`,className:"text-sm",children:e})]},e))})})]},e.title)})})]})]})}),(0,a.jsxs)(o.XW,{className:"mt-auto pt-4 border-t flex justify-between",children:[(0,a.jsx)(n.$,{type:"button",variant:"outline",onClick:()=>$(!1),disabled:F,children:"Cancel"}),(0,a.jsxs)(n.$,{type:"submit",form:"create-role-form",disabled:F,className:"bg-primary hover:bg-primary/90",children:[F&&(0,a.jsx)(c.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Create Role"]})]})]})})]})]}),(0,a.jsx)(l.Wu,{children:(0,a.jsx)(G,{users:et,loading:r,onViewUser:e=>{I({title:"View User",description:`Viewing details for ${e.first_name} ${e.last_name}`})},onEditUser:e=>{y(e),N(!0)},onDeleteUser:Z,onAssignRole:e=>{S(e),P(!0)},search:L,onSearchChange:V,currentPage:q,totalPages:z,rowsPerPage:H,onPageChange:O,onRowsPerPageChange:B,totalItems:ea.length,onRefresh:Q,onCreateNew:()=>{y(null),N(!0)}})})]}),(0,a.jsx)(C,{user:k,open:E,onOpenChange:P,onRoleAssigned:Q})]})}var I=r(99891),X=r(78272);function W({role:e,open:s,onOpenChange:r,onPermissionsAssigned:i}){let[l,m]=(0,t.useState)([]),[x,u]=(0,t.useState)([]),[p,f]=(0,t.useState)(!1),[g,N]=(0,t.useState)(!1),[v,y]=(0,t.useState)([]),[b,A]=(0,t.useState)({}),{toast:C}=(0,d.dj)(),_=e=>{y(s=>s.includes(e)?s.filter(s=>s!==e):[...s,e])},k=e=>{let s=l.filter(s=>s.category===e).map(e=>e.id);s.every(e=>v.includes(e))?y(e=>e.filter(e=>!s.includes(e))):y(e=>[...e,...s.filter(s=>!e.includes(s))])},S=e=>{A(s=>({...s,[e]:!s[e]}))},E=async()=>{if(e)try{N(!0),await (0,w.vp)(e.id,v),C({title:"Success",description:"Permissions assigned successfully"}),i(),r(!1)}catch(e){C({title:"Error",description:e.message||"Failed to assign permissions",variant:"destructive"})}finally{N(!1)}},R=Array.isArray(x)?x.map(e=>({category:e,permissions:Array.isArray(l)?l.filter(s=>s.category===e):[]})):[];return(0,a.jsx)(o.cj,{open:s,onOpenChange:r,children:(0,a.jsxs)(o.h,{className:"w-full sm:max-w-3xl flex flex-col",children:[(0,a.jsxs)(o.Fm,{children:[(0,a.jsx)(o.qp,{children:"Assign Permissions to Role"}),(0,a.jsxs)(o.Qs,{children:["Manage permissions for role ",(0,a.jsx)("span",{className:"font-semibold",children:e?.name}),". Select the permissions you want to grant to this role."]})]}),(0,a.jsxs)("div",{className:"flex-1 overflow-y-auto py-4 space-y-6",children:[(0,a.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,a.jsx)("span",{className:"text-sm font-medium",children:"Selected Permissions:"}),0===v.length?(0,a.jsx)("span",{className:"text-sm text-muted-foreground",children:"No permissions selected"}):(0,a.jsx)("div",{className:"flex flex-wrap gap-1",children:v.map(e=>{let s=l.find(s=>s.id===e);return(0,a.jsxs)(P.E,{variant:"secondary",children:[s?.name||e,(0,a.jsxs)("button",{className:"ml-1 hover:bg-secondary-foreground/10 rounded-full",onClick:()=>_(e),children:[(0,a.jsx)("span",{className:"sr-only",children:"Remove"}),(0,a.jsx)("svg",{className:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})]})]},e)})})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{className:"text-sm text-muted-foreground",children:[v.length," of ",l.length," permissions selected"]}),(0,a.jsx)(n.$,{variant:"outline",size:"sm",onClick:()=>{v.length===l.length?y([]):y(l.map(e=>e.id))},children:v.length===l.length?"Deselect All":"Select All"})]}),p?(0,a.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,a.jsx)(c.A,{className:"h-6 w-6 animate-spin"})}):(0,a.jsx)("div",{className:"border rounded-lg",children:R.map(e=>{let s=e.permissions.map(e=>e.id),r=s.filter(e=>v.includes(e)),t=r.length===s.length&&s.length>0,i=r.length>0&&!t;return(0,a.jsxs)("div",{className:"border-b last:border-b-0",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 cursor-pointer hover:bg-muted/50",onClick:()=>S(e.category),children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(n.$,{variant:"ghost",size:"sm",className:"p-0 h-6 w-6",children:b[e.category]?(0,a.jsx)(X.A,{className:"h-4 w-4"}):(0,a.jsx)(L.A,{className:"h-4 w-4"})}),(0,a.jsx)("div",{className:"font-medium",children:e.category.replace(/_/g," ")}),(0,a.jsxs)(P.E,{variant:"outline",children:[r.length,"/",e.permissions.length]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(j.S,{checked:t,onCheckedChange:()=>k(e.category)}),(0,a.jsx)("span",{className:"text-sm text-muted-foreground",children:t?"All selected":i?`${r.length} selected`:"None selected"})]})]}),b[e.category]&&(0,a.jsx)("div",{className:"pl-10 pr-4 pb-4",children:(0,a.jsx)("div",{className:"grid gap-3",children:e.permissions.map(e=>(0,a.jsxs)("div",{className:"flex items-start space-x-3 p-2 rounded hover:bg-muted/50",children:[(0,a.jsx)(j.S,{id:`permission-${e.id}`,checked:v.includes(e.id),onCheckedChange:()=>_(e.id)}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)(h.J,{htmlFor:`permission-${e.id}`,className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:e.name}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:e.description})]})]},e.id))})})]},e.category)})})]}),(0,a.jsxs)(o.XW,{className:"border-t bg-background pt-4",children:[(0,a.jsx)(n.$,{variant:"outline",onClick:()=>r(!1),disabled:g,children:"Cancel"}),(0,a.jsxs)(n.$,{onClick:E,disabled:g,children:[g&&(0,a.jsx)(c.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Assign Permissions"]})]})]})})}function Q({open:e,onOpenChange:s,onSuccess:r,companyId:i}){let[l,x]=(0,t.useState)({name:"",description:""}),[p,j]=(0,t.useState)(!1),{toast:f}=(0,d.dj)(),g=()=>{x({name:"",description:""})},N=e=>{s(e),e||g()},v=async()=>{if(!l.name.trim()||!l.description.trim())return void f({title:"Error",description:"Please fill in all required fields",variant:"destructive"});try{j(!0);let e={name:l.name.trim(),description:l.description.trim(),company_id:i,permission_ids:[]};await (0,w.rd)(e),f({title:"Success",description:"Role created successfully"}),r(),N(!1)}catch(e){f({title:"Error",description:e.message||"Failed to create role",variant:"destructive"})}finally{j(!1)}};return(0,a.jsx)(o.cj,{open:e,onOpenChange:N,children:(0,a.jsxs)(o.h,{className:"w-full sm:max-w-lg flex flex-col",children:[(0,a.jsxs)(o.Fm,{children:[(0,a.jsx)(o.qp,{children:"Create New Role"}),(0,a.jsx)(o.Qs,{children:"Create a new role for your company. Permissions can be assigned later."})]}),(0,a.jsx)("div",{className:"space-y-6 py-4 flex-grow overflow-y-auto",children:(0,a.jsxs)("div",{className:"grid gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(h.J,{htmlFor:"name",children:"Role Name *"}),(0,a.jsx)(m.p,{id:"name",value:l.name,onChange:e=>x({...l,name:e.target.value}),placeholder:"Enter role name"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(h.J,{htmlFor:"description",children:"Description *"}),(0,a.jsx)(u.T,{id:"description",value:l.description,onChange:e=>x({...l,description:e.target.value}),placeholder:"Enter role description",rows:3})]})]})}),(0,a.jsxs)(o.XW,{className:"pt-4 border-t",children:[(0,a.jsx)(n.$,{variant:"outline",onClick:()=>N(!1),disabled:p,children:"Cancel"}),(0,a.jsx)(n.$,{onClick:v,disabled:p,children:p?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(c.A,{className:"h-4 w-4 mr-2 animate-spin"}),"Creating..."]}):"Create Role"})]})]})})}function K(){let[e,s]=(0,t.useState)([]),[r,i]=(0,t.useState)(!0),[c,o]=(0,t.useState)(!1),[h,x]=(0,t.useState)(null),[u,p]=(0,t.useState)(!1),[j,g]=(0,t.useState)({}),[N,v]=(0,t.useState)(null),[y,b]=(0,t.useState)(!1),[A,C]=(0,t.useState)(!1),[z,G]=(0,t.useState)(""),[H,J]=(0,t.useState)(1),[B,X]=(0,t.useState)(1),[K,Z]=(0,t.useState)(10),{toast:Y}=(0,d.dj)(),{userProfile:ee}=(0,f.A)(),es=ee?.company?.id||"",er=async()=>{i(!0);try{let e=(await (0,w.O0)()).map(e=>({id:e.id,name:e.name,description:e.description,is_active:e.is_active,created_at:e.created_at,permissions:{},company:e.company?{id:e.company.id,name:e.company.name}:void 0,users_count:e.users?e.users.length:0}));s(e),X(Math.ceil(e.length/K)||1)}catch(e){Y({title:"Error",description:e.message||"Failed to load role data.",variant:"destructive"})}finally{i(!1)}},ea=async e=>{if(confirm("Are you sure you want to delete this role? This action cannot be undone."))try{await (0,w.EO)(e.id),Y({title:"Success",description:"Role deleted successfully."}),await er()}catch(e){Y({title:"Error",description:e.message||"An unexpected error occurred.",variant:"destructive"})}},et=e=>{v({id:e.id,name:e.name,description:e.description||"",is_active:e.is_active,created_at:e.created_at,updated_at:e.created_at,company_id:e.company?.id||null,is_system_role:!1,permissions:[]}),b(!0)},ei=e=>{x(e),g(e.permissions||{}),o(!0)};_.lp.every(e=>j[e])||_.lp.some(e=>j[e]);let en=e.filter(e=>{let s=z.toLowerCase();return e.name&&e.name.toLowerCase().includes(s)||e.description&&e.description.toLowerCase().includes(s)||e.company&&e.company.name&&e.company.name.toLowerCase().includes(s)}).slice((H-1)*K,H*K),el=e=>e?(0,a.jsx)(P.E,{variant:"default",className:"bg-green-100 text-green-800",children:"Active"}):(0,a.jsx)(P.E,{variant:"secondary",className:"bg-red-100 text-red-800",children:"Inactive"}),ec=({role:e,onView:s,onEdit:r,onDelete:t,onAssignPermissions:i})=>(0,a.jsxs)(R.rI,{children:[(0,a.jsx)(R.ty,{asChild:!0,children:(0,a.jsx)(n.$,{variant:"ghost",className:"h-8 w-8 p-0",children:(0,a.jsx)(V.A,{className:"h-4 w-4"})})}),(0,a.jsxs)(R.SQ,{align:"end",children:[(0,a.jsx)(R.lp,{children:"Actions"}),(0,a.jsxs)(R._2,{onClick:s,children:[(0,a.jsx)(q.A,{className:"h-4 w-4 mr-2"})," View Details"]}),(0,a.jsxs)(R._2,{onClick:r,children:[(0,a.jsx)(O.A,{className:"h-4 w-4 mr-2"})," Edit Role"]}),(0,a.jsxs)(R._2,{onClick:s=>{s.stopPropagation(),i(e)},children:[(0,a.jsx)(I.A,{className:"h-4 w-4 mr-2"})," Assign Permissions"]}),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(R.mB,{}),(0,a.jsxs)(R._2,{onClick:t,className:"text-red-600 focus:text-red-600",children:[(0,a.jsx)(T.A,{className:"h-4 w-4 mr-2"})," Delete Role"]})]})]})]});return(0,a.jsxs)(l.Zp,{children:[(0,a.jsx)(l.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:(0,a.jsx)(l.ZB,{className:"text-2xl font-bold",children:"Roles"})}),(0,a.jsxs)(l.Wu,{children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("div",{className:"flex space-x-4",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)($.A,{className:"absolute left-2 top-1/2 transform -translate-y-1/2 text-gray-500"}),(0,a.jsx)(m.p,{className:"pl-8 max-w-sm",placeholder:"Search roles...",value:z,onChange:e=>G(e.target.value)})]})}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsxs)(n.$,{size:"sm",onClick:()=>C(!0),className:"bg-primary text-white hover:bg-primary/90",children:[(0,a.jsx)(F.A,{className:"mr-2 h-4 w-4"}),"Add Role"]}),(0,a.jsxs)(n.$,{size:"sm",className:"bg-primary text-white hover:bg-primary/90",children:[(0,a.jsx)(U.A,{className:"mr-2 h-4 w-4"}),"Export"]}),(0,a.jsxs)(n.$,{size:"sm",className:"bg-primary text-white hover:bg-primary/90",onClick:er,children:[(0,a.jsx)(M.A,{className:"mr-2 h-4 w-4"}),"Refresh"]})]})]}),(0,a.jsx)("div",{className:"rounded-md border bg-white",children:(0,a.jsxs)(S.XI,{children:[(0,a.jsx)(S.A0,{children:(0,a.jsxs)(S.Hj,{children:[(0,a.jsx)(S.nd,{className:"font-semibold",children:"Role Name"}),(0,a.jsx)(S.nd,{className:"font-semibold",children:"Description"}),(0,a.jsx)(S.nd,{className:"font-semibold",children:"Company"}),(0,a.jsx)(S.nd,{className:"font-semibold",children:"Status"}),(0,a.jsx)(S.nd,{className:"font-semibold",children:"Users"}),(0,a.jsx)(S.nd,{className:"font-semibold",children:"Permissions"}),(0,a.jsx)(S.nd,{className:"font-semibold",children:"Created"}),(0,a.jsx)(S.nd,{className:"text-right font-semibold",children:"Actions"})]})}),(0,a.jsx)(S.BF,{children:r?(0,a.jsx)(S.Hj,{children:(0,a.jsx)(S.nA,{colSpan:8,className:"h-24 text-center",children:(0,a.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-[#E30040]"}),(0,a.jsx)("span",{children:"Loading roles..."})]})})}):0===e.length?(0,a.jsx)(S.Hj,{children:(0,a.jsx)(S.nA,{colSpan:8,className:"h-24 text-center",children:(0,a.jsxs)("div",{className:"text-gray-500",children:[(0,a.jsx)("p",{className:"font-semibold",children:"No roles found"}),(0,a.jsx)("p",{className:"text-sm",children:"Add your first role to get started"})]})})}):en.map(e=>{let s=Object.values(e.permissions||{}).filter(Boolean).length;return(0,a.jsxs)(S.Hj,{className:"hover:bg-gray-50 cursor-pointer",onClick:()=>{Y({title:"View Role",description:`Viewing details for ${e.name}`})},children:[(0,a.jsx)(S.nA,{className:"font-medium",children:(0,a.jsx)("div",{className:"flex flex-col",children:(0,a.jsx)("span",{className:"text-sm font-semibold",children:e.name||"-"})})}),(0,a.jsx)(S.nA,{children:(0,a.jsx)("div",{className:"flex flex-col",children:(0,a.jsx)("span",{className:"text-sm font-medium",children:e.description||"-"})})}),(0,a.jsx)(S.nA,{children:(0,a.jsx)("div",{className:"flex flex-col",children:(0,a.jsx)("span",{className:"text-sm font-medium",children:e.company?.name||"System"})})}),(0,a.jsx)(S.nA,{children:el(e.is_active)}),(0,a.jsx)(S.nA,{children:(0,a.jsx)("div",{className:"text-sm font-medium",children:e.users_count})}),(0,a.jsx)(S.nA,{children:(0,a.jsx)("div",{className:"text-sm font-medium",children:s})}),(0,a.jsx)(S.nA,{children:(0,a.jsxs)("div",{className:"text-sm",children:[e.created_at?(0,k.GP)(new Date(e.created_at),"MMM dd, yyyy"):"-",e.created_at&&(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:(0,k.GP)(new Date(e.created_at),"HH:mm")})]})}),(0,a.jsx)(S.nA,{className:"text-right",onClick:e=>e.stopPropagation(),children:(0,a.jsx)(ec,{role:e,onView:()=>{Y({title:"View Role",description:`Viewing details for ${e.name}`})},onEdit:()=>ei(e),onDelete:()=>ea(e),onAssignPermissions:et})})]},e.id)})})]})}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("p",{className:"text-sm font-medium",children:"Rows per page"}),(0,a.jsxs)(E.l6,{value:K.toString(),onValueChange:e=>{Z(Number(e)),J(1)},children:[(0,a.jsx)(E.bq,{className:"h-8 w-[70px]",children:(0,a.jsx)(E.yv,{placeholder:K})}),(0,a.jsx)(E.gC,{side:"top",children:[5,10,20,30,40,50].map(e=>(0,a.jsx)(E.eb,{value:e.toString(),children:e},e))})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)(n.$,{size:"sm",onClick:()=>J(Math.max(H-1,1)),disabled:1===H,className:"bg-primary text-white hover:bg-primary/90",children:[(0,a.jsx)(D.A,{className:"h-4 w-4"}),"Previous"]}),(0,a.jsxs)("div",{className:"flex items-center justify-center text-sm font-medium",children:["Page ",H," of ",B||1]}),(0,a.jsxs)(n.$,{size:"sm",onClick:()=>J(Math.min(H+1,B||1)),disabled:H===B||0===B,className:"bg-primary text-white hover:bg-primary/90",children:["Next",(0,a.jsx)(L.A,{className:"h-4 w-4"})]})]})]})]}),(0,a.jsx)(W,{role:N,open:y,onOpenChange:b,onPermissionsAssigned:er}),(0,a.jsx)(Q,{open:A,onOpenChange:C,onSuccess:er,companyId:es})]})]})}function Z(){let{userProfile:e,isLoading:s}=(0,f.A)(),[r,n]=(0,t.useState)("users"),[l,d]=(0,t.useState)(!1);return s?(0,a.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,a.jsx)(c.A,{className:"h-8 w-8 animate-spin"})}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-semibold text-gray-900",children:"User & Role Management"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Manage users, define roles, and assign permissions."})]}),(0,a.jsxs)(i.tU,{value:r,onValueChange:e=>{n(e),"roles"!==e||l||d(!0)},className:"w-full",children:[(0,a.jsxs)(i.j7,{className:"grid w-full grid-cols-2",children:[(0,a.jsx)(i.Xi,{value:"users",children:"Users"}),(0,a.jsx)(i.Xi,{value:"roles",children:"Roles"})]}),(0,a.jsx)(i.av,{value:"users",children:(0,a.jsx)(B,{})}),(0,a.jsx)(i.av,{value:"roles",children:l&&(0,a.jsx)(K,{})})]})]})}r(8112)},57326:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>a});let a=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/inchwara/sawela/app/users/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/inchwara/sawela/app/users/page.tsx","default")},59821:(e,s,r)=>{"use strict";r.d(s,{E:()=>l});var a=r(60687),t=r(24224),i=r(96241);let n=(0,t.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function l({className:e,variant:s,...r}){return(0,a.jsx)("div",{className:(0,i.cn)(n({variant:s}),e),...r})}},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},63143:(e,s,r)=>{"use strict";r.d(s,{A:()=>a});let a=(0,r(62688).A)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},71143:(e,s,r)=>{"use strict";r.r(s),r.d(s,{GlobalError:()=>n.a,__next_app__:()=>m,pages:()=>o,routeModule:()=>h,tree:()=>d});var a=r(65239),t=r(48088),i=r(88170),n=r.n(i),l=r(30893),c={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>l[e]);r.d(s,c);let d={children:["",{children:["users",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,57326)),"/Users/inchwara/sawela/app/users/page.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,33593)),"/Users/inchwara/sawela/app/users/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,58014)),"/Users/inchwara/sawela/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"]}]}.children,o=["/Users/inchwara/sawela/app/users/page.tsx"],m={require:r,loadChunk:()=>Promise.resolve()},h=new a.AppPageRouteModule({definition:{kind:t.RouteKind.APP_PAGE,page:"/users/page",pathname:"/users",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},71420:(e,s,r)=>{"use strict";r.d(s,{TK:()=>l,hG:()=>c,hU:()=>t,iz:()=>d,kg:()=>n,lo:()=>i});var a=r(29226);async function t(){try{return(await (0,a.Ay)("/users","GET")).users||[]}catch(e){throw Error(`Failed to fetch users: ${e.message||"Unknown error"}`)}}async function i(){return t()}async function n(e){try{return await (0,a.Ay)("/users","POST",e,!0)}catch(e){throw Error(`Failed to create user: ${e.message||"Unknown error"}`)}}async function l(e,s){try{return await (0,a.Ay)(`/users/${e}`,"PUT",s,!0)}catch(e){throw Error(`Failed to update user: ${e.message||"Unknown error"}`)}}async function c(e){try{await (0,a.Ay)(`/users/${e}`,"DELETE",void 0,!0)}catch(e){throw Error(`Failed to delete user: ${e.message||"Unknown error"}`)}}async function d(e,s){try{return await (0,a.Ay)(`/users/${e}/assign-role`,"POST",{role_id:s},!0)}catch(e){throw Error(`Failed to assign role to user: ${e.message||"Unknown error"}`)}}},78148:(e,s,r)=>{"use strict";r.d(s,{b:()=>l});var a=r(43210),t=r(14163),i=r(60687),n=a.forwardRef((e,s)=>(0,i.jsx)(t.sG.label,{...e,ref:s,onMouseDown:s=>{s.target.closest("button, input, select, textarea")||(e.onMouseDown?.(s),!s.defaultPrevented&&s.detail>1&&s.preventDefault())}}));n.displayName="Label";var l=n},85910:(e,s,r)=>{"use strict";r.d(s,{Xi:()=>d,av:()=>o,j7:()=>c,tU:()=>l});var a=r(60687),t=r(43210),i=r(55146),n=r(96241);let l=i.bL,c=t.forwardRef(({className:e,...s},r)=>(0,a.jsx)(i.B8,{ref:r,className:(0,n.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...s}));c.displayName=i.B8.displayName;let d=t.forwardRef(({className:e,...s},r)=>(0,a.jsx)(i.l9,{ref:r,className:(0,n.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...s}));d.displayName=i.l9.displayName;let o=t.forwardRef(({className:e,...s},r)=>(0,a.jsx)(i.UC,{ref:r,className:(0,n.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...s}));o.displayName=i.UC.displayName},88233:(e,s,r)=>{"use strict";r.d(s,{A:()=>a});let a=(0,r(62688).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},93437:(e,s,r)=>{"use strict";r.d(s,{S:()=>c});var a=r(60687),t=r(43210),i=r(40211),n=r(13964),l=r(96241);let c=t.forwardRef(({className:e,...s},r)=>(0,a.jsx)(i.bL,{ref:r,className:(0,l.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...s,children:(0,a.jsx)(i.C1,{className:(0,l.cn)("flex items-center justify-center text-current"),children:(0,a.jsx)(n.A,{className:"h-4 w-4"})})}));c.displayName=i.bL.displayName},95745:(e,s,r)=>{"use strict";async function a(){try{throw Error("getRoles must be called client-side")}catch(e){throw console.error("Error in getRoles:",e),Error(`Failed to fetch roles: ${e.message||"Unknown error"}`)}}async function t(e){try{throw Error("createRole must be called client-side")}catch(e){throw Error(`Failed to create role: ${e.message||"Unknown error"}`)}}async function i(e,s){try{throw Error("updateRole must be called client-side")}catch(e){throw Error(`Failed to update role: ${e.message||"Unknown error"}`)}}async function n(e){try{throw Error("deleteRole must be called client-side")}catch(e){throw Error(`Failed to delete role: ${e.message||"Unknown error"}`)}}async function l(e,s){try{throw Error("assignPermissionsToRole must be called client-side")}catch(e){throw Error(`Failed to assign permissions to role: ${e.message||"Unknown error"}`)}}async function c(e){try{throw Error("getRolePermissions must be called client-side")}catch(e){throw Error(`Failed to fetch role permissions: ${e.message||"Unknown error"}`)}}r.d(s,{EO:()=>n,O0:()=>a,S0:()=>i,bn:()=>c,rd:()=>t,vp:()=>l}),r(29226)}};var s=require("../../webpack-runtime.js");s.C(e);var r=e=>s(s.s=e),a=s.X(0,[7719,6447,3399,5814,7676,1126,4097,5902,5650,3209,8571,1158,6173,1231,9973],()=>r(71143));module.exports=a})();